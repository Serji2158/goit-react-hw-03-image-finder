{"version":3,"sources":["Components/imageGallery/ImageGallery.module.css","Components/modal/Modal.module.css","Components/imageGalleryItem/ImageGalleryItem.module.css","Components/modal/Modal.js","Components/imageGalleryItem/ImageGalleryItem.js","service/API.js","Components/imageGallery/ImageGallery.js","Components/searchBar/SearchBar.js","App.js","index.js","Components/searchBar/SearchBar.module.css"],"names":["module","exports","modalRoot","document","querySelector","Modal","state","handleEsc","e","code","props","hideModal","handleBackdropClick","target","currentTarget","window","addEventListener","this","removeEventListener","createPortal","className","s","overlay","onClick","modal","src","largeImage","alt","Component","propType","PropTypes","string","isRequired","func","ImageGalleryItem","showModal","toggleModal","setState","prev","id","gallery","map","picture","imageGalleryItem","imageGalleryItemImage","webformatURL","largeImageURL","array","BASE_URL","API_KEY","api","fetchGallery","query","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGallery","loading","error","isHidden","updateGallery","hits","prevState","catch","finally","scroll","body","scrollIntoView","behavior","block","prevProps","prevQuery","nextQuery","prevPage","nextPage","message","infoBox","length","type","Button","increasePage","number","SearchBar","handleQueryChange","value","toLowerCase","handleSubmit","preventDefault","trim","toast","position","POSITION","TOP_LEFT","onSubmit","searchBar","searchForm","searchFormButton","searchFormButtonLabel","searchFormInput","autoComplete","autoFocus","placeholder","onChange","App","handleFormSubmit","autoClose","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cc602ed0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__16GAi\",\"Button\":\"ImageGallery_Button__tzMA1\",\"infoBox\":\"ImageGallery_infoBox__1ufdc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3vy6A\",\"modal\":\"Modal_modal__2g-tp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__36g5R\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__M_d3J\"};","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { createPortal } from \"react-dom\";\r\nimport s from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  state = {};\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleEsc);\r\n    // const body = document.querySelector(\"body\");\r\n    // body.style.overflow = \"hidden\";\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleEsc);\r\n    // const body = document.querySelector(\"body\");\r\n    // body.style.overflow = \"auto\";\r\n  }\r\n\r\n  handleEsc = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.hideModal(e);\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.hideModal(e);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.modal}>\r\n          <img src={this.props.largeImage} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nModal.propType = {\r\n  largeImage: PropTypes.string.isRequired,\r\n  hideModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Modal from \"../modal/Modal\";\r\nimport s from \"../imageGalleryItem/ImageGalleryItem.module.css\";\r\n\r\nclass ImageGalleryItem extends Component {\r\n  state = {\r\n    showModal: false,\r\n    largeImage: \"\",\r\n  };\r\n\r\n  toggleModal = (e) => {\r\n    this.setState((prev) => ({\r\n      showModal: !prev.showModal,\r\n      largeImage: e.target.id || \"\",\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.gallery.map((picture) => (\r\n          <li className={s.imageGalleryItem} key={picture.id}>\r\n            <img\r\n              className={s.imageGalleryItemImage}\r\n              src={picture.webformatURL}\r\n              alt=\"\"\r\n              id={picture.largeImageURL}\r\n              onClick={this.toggleModal}\r\n            />\r\n          </li>\r\n        ))}\r\n        {this.state.showModal && (\r\n          <Modal\r\n            hideModal={this.toggleModal}\r\n            largeImage={this.state.largeImage}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nImageGalleryItem.propType = {\r\n  gallery: PropTypes.array.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","const BASE_URL = \"https://pixabay.com/api/\";\r\nconst API_KEY = \"23675334-f5a1abcfe20e79567add0d4e1\";\r\n\r\nfunction fetchGallery(query, page = 1) {\r\n  return fetch(\r\n    `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error(`Нет картинки с именем ${query}`));\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchGallery,\r\n};\r\n\r\nexport default api;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../imageGalleryItem/ImageGalleryItem\";\r\nimport api from \"./../../service/API\";\r\nimport s from \"./ImageGallery.module.css\";\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    gallery: [],\r\n    loading: false,\r\n    error: null,\r\n    isHidden: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevProps.query;\r\n    const nextQuery = this.props.query;\r\n\r\n    const prevPage = prevProps.page;\r\n    const nextPage = this.props.page;\r\n\r\n    if (nextQuery !== prevQuery || nextPage !== prevPage) {\r\n      this.setState({ loading: true });\r\n      this.updateGallery();\r\n    }\r\n\r\n    if (this.state.gallery !== prevState.gallery && this.props.page !== 1) {\r\n      this.scroll();\r\n    }\r\n  }\r\n\r\n  updateGallery = () => {\r\n    api\r\n      .fetchGallery(this.props.query, this.props.page)\r\n      .then(({ hits }) => {\r\n        this.setState((prevState) => ({\r\n          gallery:\r\n            this.props.page === 1 ? [...hits] : [...prevState.gallery, ...hits],\r\n          isHidden: true,\r\n        }));\r\n      })\r\n      .catch((error) => this.setState({ error }))\r\n      .finally(() => this.setState({ loading: false }));\r\n  };\r\n\r\n  scroll = () => {\r\n    const element = document.body;\r\n    element.scrollIntoView({\r\n      behavior: \"smooth\",\r\n      block: \"end\",\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { gallery, loading, error } = this.state;\r\n    const { query } = this.props;\r\n    return (\r\n      <>\r\n        {error && <p>Whoops, something went wrong: {error.message}</p>}\r\n        {loading && <p>Loading...</p>}\r\n        {!query && <div className={s.infoBox}>Enter you request, please.</div>}\r\n        {gallery.length > 0 && (\r\n          <ul className={s.ImageGallery}>\r\n            <ImageGalleryItem gallery={this.state.gallery} />\r\n          </ul>\r\n        )}\r\n        {this.state.isHidden && (\r\n          <button\r\n            type=\"button\"\r\n            className={s.Button}\r\n            onClick={this.props.increasePage}\r\n          >\r\n            LOAD MORE\r\n          </button>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nImageGallery.propType = {\r\n  query: PropTypes.string.isRequired,\r\n  increasePage: PropTypes.func.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { toast } from \"react-toastify\";\r\nimport s from \"./SearchBar.module.css\";\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n  handleQueryChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.query.trim() === \"\") {\r\n      return toast.error(\"Put your query,please !\", {\r\n        position: toast.POSITION.TOP_LEFT,\r\n      });\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchBar}>\r\n        <form className={s.searchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.searchFormButton}>\r\n            <span className={s.searchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.searchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleQueryChange}\r\n            value={this.state.query}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchBar.propType = {\r\n  onSubmit: PropTypes.func,\r\n};\r\nexport default SearchBar;\r\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ToastContainer } from \"react-toastify\";\nimport ImageGallery from \"./Components/imageGallery/ImageGallery\";\nimport SearchBar from \"./Components/searchBar/SearchBar\";\n\nclass App extends Component {\n  state = {\n    query: \"\",\n    page: 1,\n  };\n\n  handleFormSubmit = (query) => {\n    this.setState({ query, page: 1 });\n  };\n\n  increasePage = () => {\n    this.setState((prevState) => {\n      return {\n        page: prevState.page + 1,\n      };\n    });\n  };\n\n  render() {\n    const { query, page } = this.state;\n    return (\n      <>\n        <SearchBar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          query={query}\n          page={page}\n          increasePage={this.increasePage}\n        />\n        <ToastContainer autoClose={3000} />\n      </>\n    );\n  }\n}\n\nApp.propType = {\n  query: PropTypes.string.isRequired,\n  page: PropTypes.string.isRequired,\n};\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <>\n    <App />\n  </>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBar\":\"SearchBar_searchBar__29BZk\",\"searchForm\":\"SearchBar_searchForm__A2ZDL\",\"searchFormButton\":\"SearchBar_searchFormButton__M89LS\",\"searchFormButtonLabel\":\"SearchBar_searchFormButtonLabel__2L8xq\",\"searchFormInput\":\"SearchBar_searchFormInput__39yJP\"};"],"sourceRoot":""}