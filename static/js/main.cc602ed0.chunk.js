(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__16GAi",Button:"ImageGallery_Button__tzMA1",infoBox:"ImageGallery_infoBox__1ufdc"}},13:function(e,t,a){e.exports={overlay:"Modal_overlay__3vy6A",modal:"Modal_modal__2g-tp"}},14:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__36g5R",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__M_d3J"}},19:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(7),o=a.n(n),c=(a(19),a(3)),s=a(4),i=a(6),l=a(5),u=a(2),h=a.n(u),p=a(9),d=a(11),g=a(13),m=a.n(g),y=a(1),j=document.querySelector("#modal-root"),b=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e.handleEsc=function(t){"Escape"===t.code&&e.props.hideModal(t)},e.handleBackdropClick=function(t){t.target===t.currentTarget&&e.props.hideModal(t)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEsc)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEsc)}},{key:"render",value:function(){return Object(n.createPortal)(Object(y.jsx)("div",{className:m.a.overlay,onClick:this.handleBackdropClick,children:Object(y.jsx)("div",{className:m.a.modal,children:Object(y.jsx)("img",{src:this.props.largeImage,alt:""})})}),j)}}]),a}(r.Component);b.propType={largeImage:h.a.string.isRequired,hideModal:h.a.func.isRequired};var f=b,O=a(14),v=a.n(O),_=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={showModal:!1,largeImage:""},e.toggleModal=function(t){e.setState((function(e){return{showModal:!e.showModal,largeImage:t.target.id||""}}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return Object(y.jsxs)(y.Fragment,{children:[this.props.gallery.map((function(t){return Object(y.jsx)("li",{className:v.a.imageGalleryItem,children:Object(y.jsx)("img",{className:v.a.imageGalleryItemImage,src:t.webformatURL,alt:"",id:t.largeImageURL,onClick:e.toggleModal})},t.id)})),this.state.showModal&&Object(y.jsx)(f,{hideModal:this.toggleModal,largeImage:this.state.largeImage})]})}}]),a}(r.Component);_.propType={gallery:h.a.array.isRequired,onClick:h.a.func.isRequired};var x=_,I="https://pixabay.com/api/",q="23675334-f5a1abcfe20e79567add0d4e1";var S={fetchGallery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("".concat(I,"?q=").concat(e,"&page=").concat(t,"&key=").concat(q,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e)))}))}},w=S,k=a(10),B=a.n(k),F=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={gallery:[],loading:!1,error:null,isHidden:!1},e.updateGallery=function(){w.fetchGallery(e.props.query,e.props.page).then((function(t){var a=t.hits;e.setState((function(t){return{gallery:1===e.props.page?Object(d.a)(a):[].concat(Object(d.a)(t.gallery),Object(d.a)(a)),isHidden:!0}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({loading:!1})}))},e.scroll=function(){document.body.scrollIntoView({behavior:"smooth",block:"end"})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.query,r=this.props.query,n=e.page,o=this.props.page;r===a&&o===n||(this.setState({loading:!0}),this.updateGallery()),this.state.gallery!==t.gallery&&1!==this.props.page&&this.scroll()}},{key:"render",value:function(){var e=this.state,t=e.gallery,a=e.loading,r=e.error,n=this.props.query;return Object(y.jsxs)(y.Fragment,{children:[r&&Object(y.jsxs)("p",{children:["Whoops, something went wrong: ",r.message]}),a&&Object(y.jsx)("p",{children:"Loading..."}),!n&&Object(y.jsx)("div",{className:B.a.infoBox,children:"Enter you request, please."}),t.length>0&&Object(y.jsx)("ul",{className:B.a.ImageGallery,children:Object(y.jsx)(x,{gallery:this.state.gallery})}),this.state.isHidden&&Object(y.jsx)("button",{type:"button",className:B.a.Button,onClick:this.props.increasePage,children:"LOAD MORE"})]})}}]),a}(r.Component);F.propType={query:h.a.string.isRequired,increasePage:h.a.func.isRequired,page:h.a.number.isRequired};var G=F,M=a(8),C=a.n(M),L=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleQueryChange=function(t){e.setState({query:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.query.trim())return p.b.error("Put your query,please !",{position:p.b.POSITION.TOP_LEFT});e.props.onSubmit(e.state.query),e.setState({query:""})},e}return Object(s.a)(a,[{key:"render",value:function(){return Object(y.jsx)("header",{className:C.a.searchBar,children:Object(y.jsxs)("form",{className:C.a.searchForm,onSubmit:this.handleSubmit,children:[Object(y.jsx)("button",{type:"submit",className:C.a.searchFormButton,children:Object(y.jsx)("span",{className:C.a.searchFormButtonLabel,children:"Search"})}),Object(y.jsx)("input",{className:C.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleQueryChange,value:this.state.query})]})})}}]),a}(r.Component);L.propType={onSubmit:h.a.func};var N=L,R=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={query:"",page:1},e.handleFormSubmit=function(t){e.setState({query:t,page:1})},e.increasePage=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.query,a=e.page;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(N,{onSubmit:this.handleFormSubmit}),Object(y.jsx)(G,{query:t,page:a,increasePage:this.increasePage}),Object(y.jsx)(p.a,{autoClose:3e3})]})}}]),a}(r.Component);R.propType={query:h.a.string.isRequired,page:h.a.string.isRequired};var E=R;o.a.render(Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(E,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={searchBar:"SearchBar_searchBar__29BZk",searchForm:"SearchBar_searchForm__A2ZDL",searchFormButton:"SearchBar_searchFormButton__M89LS",searchFormButtonLabel:"SearchBar_searchFormButtonLabel__2L8xq",searchFormInput:"SearchBar_searchFormInput__39yJP"}}},[[23,1,2]]]);
//# sourceMappingURL=main.cc602ed0.chunk.js.map